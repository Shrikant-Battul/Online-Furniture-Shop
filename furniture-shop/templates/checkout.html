{% extends 'base.html' %}
{% block content %}
<h2>Checkout</h2>

{% if messages %}
  <div class="alert">
    {% for m in messages %}<div>{{ m }}</div>{% endfor %}
  </div>
{% endif %}

{% if items %}
  <div class="card" style="text-align:left">
    <h3>Order Summary</h3>
    <ul>
      {% for it in items %}
        <li>{{ it.product.name }} × {{ it.qty }} — ₹{{ it.line_total|floatformat:2 }}</li>
      {% endfor %}
    </ul>
    <p><strong>Total:</strong> ₹{{ total|floatformat:2 }}</p>
  </div>
{% endif %}

<form method="post" class="auth-form">
  {% csrf_token %}
  <label>Full name</label>
  {{ form.name }}
  <label>Phone</label>
  {{ form.phone }}
  <label>Email</label>
  {{ form.email }}
  <label>Address</label>
  {{ form.address }}
  <label>City</label>
  {{ form.city }}
  <label>Postal code</label>
  {{ form.postal_code }}
  <div style="margin:8px 0">
    <label><strong>Payment method</strong></label>
    <div class="card" style="text-align:left">
      {{ form.payment_method }}
    </div>
  </div>
  <button class="button" type="submit">Place Order</button>
</form>

<style>
.auth-form{max-width:640px;margin-top:12px}
.auth-form input,.auth-form textarea{width:100%;padding:10px;border:1px solid var(--border);border-radius:8px;background:var(--surface);color:var(--text);margin:6px 0 12px}
.alert{max-width:640px;margin:10px 0;padding:10px 12px;border:1px solid #fecaca;background:#fee2e2;color:#991b1b;border-radius:8px}
</style>
{% endblock %}
